# -*- coding: utf-8 -*-
"""app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1mgiCPWeh9yxe09QNeIY_QDEtRJBJHcgX
"""
import streamlit as st
import pandas as pd
import time

# Try to import core.py (safe import)
try:
    from fitsflow import core
except ImportError:
    core = None

st.set_page_config(page_title="AstroFlow", layout="wide")

# ---- HEADER ----
st.title("ðŸ”­ AstroFlow MVP")
st.markdown("Upload your telescope FITS/CSV data and get quick insights.")

# ---- FILE UPLOAD ----
uploaded_files = st.file_uploader(
    "Upload one or more data files",
    type=["fits", "csv", "txt"],
    accept_multiple_files=True
)

# ---- RUN ANALYSIS ----
if uploaded_files:
    st.success(f"âœ… {len(uploaded_files)} file(s) uploaded successfully.")

    if st.button("ðŸš€ Run Analysis"):
        with st.spinner("Running analysis..."):
            time.sleep(2)  # fake delay for UI feedback

            results = []
            for f in uploaded_files:
                filename = f.name

                # If core.py exists, call its function
                if core and hasattr(core, "analyze_file"):
                    res = core.analyze_file(f)  # custom function in your core.py
                else:
                    # fallback dummy output
                    res = {
                        "filename": filename,
                        "status": "Processed",
                        "objects_detected": 3,
                        "signal_to_noise": 42.7
                    }

                results.append(res)

            # Convert results into dataframe
            df = pd.DataFrame(results)
            st.subheader("ðŸ“Š Analysis Results")
            st.dataframe(df)

            st.success("âœ¨ Analysis complete!")
else:
    st.info("Please upload data files to begin analysis.")


