# -*- coding: utf-8 -*-
"""app.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/1mgiCPWeh9yxe09QNeIY_QDEtRJBJHcgX
"""

import streamlit as st
import tempfile
import os
from FitsFlow import core

st.title("FitsFlow: Automated FITS Analyzer")
st.write("Upload FITS files to analyze spectra, stack signals, and simulate biosignatures.")

uploaded_files = st.file_uploader("Upload FITS files", type=["fits"], accept_multiple_files=True)

if uploaded_files:
    with tempfile.TemporaryDirectory() as tmpdir:
        file_paths = []
        for f in uploaded_files:
            path = os.path.join(tmpdir, f.name)
            with open(path, "wb") as out:
                out.write(f.read())
            file_paths.append(path)

        st.success(f"Uploaded {len(file_paths)} files. Running analysis...")
        core.analyze_all_fits()  # this runs your core.py script
else:
    st.info("Please upload one or more FITS files to begin.")